@import compass/utilities

// Configure grid coordinates
$grid-columns: 12 !default
$grid-width: 60px !default
$grid-gutter-width: 20px !default
$overflow-allowed: true !default

=grid-coordinates
  .grid-container
    +grid-container
  .nested-grid-container
    +nested-grid-container
  .grid-block
    +grid-block
  @for $i from 1 through $grid-columns
    .grid-#{$i}
      +grid($i)
  .grid-full
    +grid-full
  @for $i from 1 through $grid-columns - 1
    .grid-prefix-#{$i}
      +grid-prefix($i)
  @for $i from 1 through $grid-columns - 1
    .grid-suffix-#{$i}
      +grid-suffix($i)
  @for $i from 1 through $grid-columns - 1
    .grid-push-#{$i}
      +grid-push($i)
  @for $i from 1 through $grid-columns - 1
    .grid-pull-#{$i}
      +grid-pull($i)

=overflow-allowed($boolean: $overflow-allowed)
  @if $boolean
    +pie-clearfix
  @else
    +clearfix

=grid-container
  +overflow-allowed
  margin: 0 auto
  width: $grid-columns * $grid-width + $grid-columns * $grid-gutter-width

=nested-grid-container
  +overflow-allowed
  display: inline-block
  margin:
    left: -$grid-gutter-width / 2
    right: -$grid-gutter-width / 2
  width: auto

=grid-block
  +float-left
  +overflow-allowed
  margin: 0 $grid-gutter-width / 2

=grid($grid-columns)
  position: relative
  +grid-width($grid-columns)
  +grid-block

=grid-full
  +grid($grid-columns)

=grid-width($grid-columns)
  @if $grid-columns == 1
    width: $grid-width
  @else
    width: $grid-columns * $grid-width + $grid-columns * $grid-gutter-width - $grid-gutter-width

=grid-prefix($grid-columns)
  @if $grid-columns == 1
    padding-left: $grid-width + $grid-gutter-width
  @else
    padding-left: $grid-columns * $grid-width + $grid-columns * $grid-gutter-width

=grid-suffix($grid-columns)
  @if $grid-columns == 1
    padding-right: $grid-width + $grid-gutter-width
  @else
    padding-right: $grid-columns * $grid-width + $grid-columns * $grid-gutter-width

=grid-push($grid-columns)
  @if $grid-columns == 1
    left: $grid-width + $grid-gutter-width
  @else
    left: $grid-columns * $grid-width + $grid-columns * $grid-gutter-width

=grid-pull($grid-columns)
  @if $grid-columns == 1
    left: -$grid-width + $grid-gutter-width
  @else
    left: -$grid-columns * $grid-width + $grid-columns * $grid-gutter-width
